<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é–æ±Ÿè®¿ä¼å¯¼èˆªè·¯çº¿å›¾ - ç²¾ç®€ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .map-container {
            background: #f1f5f9;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            height: 540px;
        }
        .marker {
            position: absolute;
            width: 32px;
            height: 32px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            z-index: 10;
            border: 2px solid white;
        }
        .dist-tag {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            color: #1e293b;
            border: 1px solid #cbd5e1;
            z-index: 6;
            font-weight: bold;
        }
        .active-tab {
            background-color: #1d4ed8 !important;
            color: white !important;
            border-color: #1d4ed8 !important;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 md:p-6">
    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
        <!-- Header -->
        <div class="bg-slate-800 p-6 text-white flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold">è®¿ä¼è¡Œç¨‹å¯¼èˆª & æ—¶é—´é¢„ä¼° (ç²¾ç®€ 18 å®¶ç‰ˆ)</h1>
                <p class="text-slate-400 text-sm mt-1">èµ·ç‚¹ï¼šæ³°å·èŒä¸šæŠ€æœ¯å­¦é™¢ (8:30 å‡ºå‘é¢„ä¼°)</p>
            </div>
            <div class="mt-4 md:mt-0 px-4 py-2 bg-slate-700 rounded-lg text-sm border border-slate-600">
                å¹³å‡å•ç«™åœç•™é¢„ä¼°ï¼š<span class="text-yellow-400">60 åˆ†é’Ÿ</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-0">
            <!-- Sidebar -->
            <div class="p-6 border-r border-gray-200 bg-gray-50 lg:col-span-1">
                <h2 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-4">é€‰æ‹©è®¿ä¼è·¯çº¿ç»„</h2>
                <div class="space-y-3">
                    <button onclick="switchGroup(1)" id="btn-1" class="w-full text-left p-4 rounded-xl border-2 border-white bg-white shadow-sm hover:shadow-md transition-all active-tab">
                        <span class="block font-extrabold text-blue-600">ç¬¬ä¸€ç»„ï¼šä¸œåŒ—é‡å·¥ç»„</span>
                        <span class="text-xs mt-1 block">åŒ—å…¥å—å‡ºï¼Œé’¢é“é€ èˆ¹ (6å®¶)</span>
                    </button>
                    <button onclick="switchGroup(2)" id="btn-2" class="w-full text-left p-4 rounded-xl border-2 border-white bg-white shadow-sm hover:shadow-md transition-all">
                        <span class="block font-extrabold text-gray-700">ç¬¬äºŒç»„ï¼šæ ¸å¿ƒå¼€å‘åŒº</span>
                        <span class="text-xs mt-1 block">æé€Ÿè¡”æ¥ï¼Œç²¾å·¥åˆ¶é€  (7å®¶)</span>
                    </button>
                    <button onclick="switchGroup(3)" id="btn-3" class="w-full text-left p-4 rounded-xl border-2 border-white bg-white shadow-sm hover:shadow-md transition-all">
                        <span class="block font-extrabold text-gray-700">ç¬¬ä¸‰ç»„ï¼šåŸå—ä¸æ–°æ¡¥ç»„</span>
                        <span class="text-xs mt-1 block">è¥¿å—èµ°å‘ï¼Œæ³µé˜€æœºç”µ (5å®¶)</span>
                    </button>
                </div>

                <div class="mt-8">
                    <h3 class="text-xs font-bold text-gray-400 mb-3">è¡Œç¨‹ç»Ÿè®¡</h3>
                    <div id="stats" class="bg-blue-50 p-4 rounded-xl space-y-2">
                        <!-- Filled by JS -->
                    </div>
                </div>
            </div>

            <!-- Main Map and List -->
            <div class="lg:col-span-3 p-6">
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                    <!-- Map Section -->
                    <div>
                        <div id="map" class="map-container">
                            <div class="absolute top-8 left-1/2 -translate-x-1/2 flex flex-col items-center">
                                <div class="w-4 h-4 bg-blue-600 rounded-full animate-ping absolute"></div>
                                <div class="w-4 h-4 bg-blue-600 rounded-full relative border-2 border-white"></div>
                                <span class="text-[10px] font-bold mt-1 bg-white shadow px-2 py-0.5 rounded text-blue-700">æ³°èŒé™¢ (èµ·ç‚¹)</span>
                            </div>
                            <div id="markers-layer"></div>
                            <svg class="absolute inset-0 w-full h-full pointer-events-none">
                                <path id="path-line" d="" fill="none" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" />
                            </svg>
                        </div>
                    </div>

                    <!-- List Section -->
                    <div class="overflow-y-auto max-h-[540px] pr-2">
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                            <span class="bg-red-500 w-2 h-6 mr-2 rounded-full"></span>
                            æ—¶é—´è¡¨ä¸è·ç¦» (18å®¶ç‰ˆ)
                        </h3>
                        <div id="stop-list" class="space-y-4">
                            <!-- Dynamic items -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const groups = {
            1: {
                totalDist: "128km (å¾€è¿”æ€»è®¡)",
                avgTime: "7.5å°æ—¶",
                stops: [
                    { id: 1, name: "æ±Ÿè‹ä½³é€šæ±½è½¦ç§‘æŠ€", dist: "52km", time: "55min", eta: "09:25", pos: { t: '32%', l: '72%' } },
                    { id: 2, name: "æ±Ÿè‹é‡‘è¯ºç‚‰è¾Š", dist: "8km", time: "12min", eta: "10:37", pos: { t: '42%', l: '78%' } },
                    { id: 3, name: "é–æ±Ÿç‰¹æ®Šé’¢", dist: "12km", time: "18min", eta: "11:55", pos: { t: '52%', l: '82%' } },
                    { id: 4, name: "æ±Ÿè‹æ–°æ‰¬å­é€ èˆ¹", dist: "15km", time: "22min", eta: "13:17", pos: { t: '62%', l: '85%' } },
                    { id: 5, name: "æ±Ÿè‹é•¿å¼ºé’¢é“", dist: "6km", time: "10min", eta: "14:27", pos: { t: '72%', l: '88%' } },
                    { id: 6, name: "æ±Ÿè‹åæ¾„é‡å·¥", dist: "4km", time: "8min", eta: "15:35", pos: { t: '82%', l: '90%' } }
                ]
            },
            2: {
                totalDist: "105km (å¾€è¿”æ€»è®¡)",
                avgTime: "7.5å°æ—¶",
                stops: [
                    { id: 1, name: "ä¸­å»ºé’¢æ„æ±Ÿè‹", dist: "55km", time: "58min", eta: "09:28", pos: { t: '38%', l: '62%' } },
                    { id: 2, name: "å¤§æ˜é‡‘å±ç§‘æŠ€", dist: "3km", time: "6min", eta: "10:34", pos: { t: '44%', l: '60%' } },
                    { id: 3, name: "æ±Ÿè‹æ’ä¹‰å·¥ä¸š", dist: "3km", time: "6min", eta: "11:40", pos: { t: '54%', l: '54%' } },
                    { id: 4, name: "æ±Ÿè‹è¿ˆèƒ½é«˜ç§‘", dist: "1.5km", time: "3min", eta: "12:43", pos: { t: '59%', l: '56%' } },
                    { id: 5, name: "æ±Ÿè‹ä¸Šéªé›†å›¢", dist: "2km", time: "5min", eta: "13:48", pos: { t: '64%', l: '58%' } },
                    { id: 6, name: "äºšæ³°ç‰¹ç§ææ–™", dist: "3km", time: "6min", eta: "14:54", pos: { t: '69%', l: '55%' } },
                    { id: 7, name: "æ±Ÿè‹æµ·é¹ç‰¹ç§è½¦", dist: "2.5km", time: "5min", eta: "15:59", pos: { t: '74%', l: '53%' } }
                ]
            },
            3: {
                totalDist: "95km (å¾€è¿”æ€»è®¡)",
                avgTime: "5.5å°æ—¶",
                stops: [
                    { id: 1, name: "æ±Ÿè‹å¤§ä¸­æŠ€æœ¯", dist: "54km", time: "56min", eta: "09:26", pos: { t: '40%', l: '45%' } },
                    { id: 2, name: "æ±Ÿè‹æ ¼å°”é¡¿ä¼ åŠ¨", dist: "7km", time: "12min", eta: "10:38", pos: { t: '48%', l: '40%' } },
                    { id: 3, name: "æ±Ÿè‹æ’åŠ›åˆ¶åŠ¨å™¨", dist: "5km", time: "10min", eta: "11:48", pos: { t: '56%', l: '35%' } },
                    { id: 4, name: "æ±Ÿè‹æ ¼å…°ç¯å¢ƒ", dist: "3km", time: "6min", eta: "12:54", pos: { t: '64%', l: '32%' } },
                    { id: 5, name: "æ±Ÿè‹åŒè¾¾æ³µä¸š", dist: "14km", time: "20min", eta: "14:14", pos: { t: '88%', l: '15%' } }
                ]
            }
        };

        function switchGroup(groupId) {
            document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.querySelector('span:first-child').classList.replace('text-white', 'text-gray-700');
            });
            const activeBtn = document.getElementById(`btn-${groupId}`);
            activeBtn.classList.add('active-tab');
            activeBtn.querySelector('span:first-child').classList.add('text-white');

            const group = groups[groupId];
            const markerLayer = document.getElementById('markers-layer');
            const stopList = document.getElementById('stop-list');
            const stats = document.getElementById('stats');
            
            markerLayer.innerHTML = '';
            stopList.innerHTML = '';
            stats.innerHTML = `
                <div class="flex justify-between text-sm"><span class="text-gray-500">å‰©ä½™è®¿ä¼æ•°:</span><span class="font-bold text-blue-600">${group.stops.length}å®¶</span></div>
                <div class="flex justify-between text-sm"><span class="text-gray-500">é¢„è®¡é‡Œç¨‹:</span><span class="font-bold">${group.totalDist}</span></div>
            `;

            group.stops.forEach((stop, index) => {
                const marker = document.createElement('div');
                marker.className = 'marker';
                marker.style.top = stop.pos.t;
                marker.style.left = stop.pos.l;
                marker.innerText = stop.id;
                markerLayer.appendChild(marker);

                if (index > 0) {
                    const prev = group.stops[index-1];
                    const distTag = document.createElement('div');
                    distTag.className = 'dist-tag';
                    distTag.style.top = `calc((${stop.pos.t} + ${prev.pos.t}) / 2)`;
                    distTag.style.left = `calc((${stop.pos.l} + ${prev.pos.l}) / 2)`;
                    distTag.innerHTML = `ğŸš— ${stop.dist}`;
                    markerLayer.appendChild(distTag);
                }

                const item = document.createElement('div');
                item.className = 'relative pl-8 border-l-2 border-gray-100 pb-4 last:pb-0';
                const distInfo = index === 0 ? `é«˜é€Ÿè¿›åœºè·ç¦»: ${stop.dist}` : `è·å‰ç«™: ${stop.dist} (${stop.time})`;
                item.innerHTML = `
                    <div class="absolute -left-[11px] top-0 w-5 h-5 bg-white border-2 border-blue-600 rounded-full z-20"></div>
                    <div class="bg-white p-3 rounded-lg border border-gray-100 shadow-sm hover:border-blue-200 transition">
                        <div class="flex justify-between items-start">
                            <h4 class="font-bold text-gray-800 text-sm">${stop.id}. ${stop.name}</h4>
                            <span class="text-xs font-mono bg-blue-100 text-blue-700 px-2 py-0.5 rounded">${stop.eta}</span>
                        </div>
                        <p class="text-[11px] text-gray-500 mt-2">${distInfo}</p>
                    </div>
                `;
                stopList.appendChild(item);
            });

            const path = document.getElementById('path-line');
            if(groupId === 1) path.setAttribute('d', 'M 300 40 Q 300 150 450 180 T 550 450');
            else if(groupId === 2) path.setAttribute('d', 'M 300 40 Q 300 150 350 200 T 380 400');
            else path.setAttribute('d', 'M 300 40 Q 300 150 250 250 T 100 480');
        }

        window.onload = () => switchGroup(1);
    </script>
</body>
</html>
